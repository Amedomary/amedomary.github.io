define(["jquery"],function($){function writeToInputFromDataValue(){$input.val($input.val()+valueKeyInput)}function writeToInput(t){$input.val(t)}function clearInput(){$input.val(null)}function writeResultToTopRight(){return $result.text(eval($input.val())),eval($input.val())}function writeYourMathToTopLeft(){$yourMath.text($input.val())}function checkBrackets(){for(var t=0,e=0,o=0,r=0;;){var u=$input.val().indexOf("(",t);if(u==-1)break;++o,t=u+1}for(;;){var u=$input.val().indexOf(")",e);if(u==-1)break;++r,e=u+1}return o<=r}function imNumberKey(t){return"1"===t||"2"===t||"3"===t||"4"===t||"5"===t||"6"===t||"7"===t||"8"===t||"9"===t||"0"===t}function imNumberSign(t){return"+"===t||"-"===t||"*"===t||"/"===t}function addErrorCalculator(){$calculatorWrapper.addClass("error")}function removeErrorCalculator(){$calculatorWrapper.removeClass("error")}var valueKeyInput,$key=$(".js-calculator-key"),$input=$(".js-calculator-input"),$result=$(".calculator-display__result"),$yourMath=$(".calculator-display__input-string"),$calculator=$(".calculator"),$calculatorWrapper=$(".calculator__wrapper");$key.on("click",function(){if(valueKeyInput=$(this).attr("data-value"),removeErrorCalculator(),"clear"===valueKeyInput)clearInput();else if("+"===valueKeyInput||"-"===valueKeyInput||"*"===valueKeyInput||"/"===valueKeyInput)writeToInputFromDataValue(),console.log("Нажали мат знак");else if("equal"===valueKeyInput)try{writeYourMathToTopLeft(),writeResultToTopRight(),writeToInput(writeResultToTopRight()),console.log("Равно =")}catch(t){addErrorCalculator()}else"brackets"===valueKeyInput?checkBrackets()?writeToInput(void 0==$input.val()[$input.val().length-1]||imNumberSign($input.val()[$input.val().length-1])?$input.val()+"(":$input.val()+"*("):(writeToInput($input.val()+")"),writeResultToTopRight(),writeYourMathToTopLeft()):imNumberKey(valueKeyInput)?(writeToInputFromDataValue(),writeResultToTopRight(),writeYourMathToTopLeft(),console.log("клик число")):console.log("клик key")}),$input.on("input",function(t){console.log("Я поменялся"),removeErrorCalculator()}),$calculator.keydown(function(t){if(13==t.keyCode)try{writeYourMathToTopLeft(),writeResultToTopRight(),writeToInput(writeResultToTopRight()),console.log("Энтер")}catch(e){addErrorCalculator()}}),$calculator.keydown(function(t){46==t.keyCode&&(clearInput(),console.log("Делете"))});var regNumber=/^([0-9])$/,regSign=/^([\/\/\/*\/-\/+])$/,regLetter=/^([a-zA-Zа-яА-Я])$/;$input.on("keydown",function(t){return regNumber.test(t.key)?(console.log("я число"),!0):regSign.test(t.key)?(console.log("я допустимый знак"),!0):regLetter.test(t.key)?(console.log("я буква"),!1):(console.log("меня не запрограмировали"),!0)})});